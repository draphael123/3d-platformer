<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3D Platformer</title>
    <style>
      * { margin: 0; padding: 0; }
      html, body { width: 100%; height: 100%; overflow: hidden; }
      #app { width: 100%; height: 100%; position: relative; }
      #hud { position: absolute; top: 12px; left: 12px; color: #fff; font: 18px sans-serif; text-shadow: 0 1px 3px #000; z-index: 2; display: flex; align-items: center; gap: 16px; }
      #hud-hearts { display: flex; gap: 4px; font-size: 24px; }
      #hud-hearts .heart { transition: transform 0.15s, opacity 0.2s; }
      #hud-hearts .heart.lost { transform: scale(0); opacity: 0; }
      #score-popup { position: absolute; left: 50%; top: 40%; transform: translate(-50%,0); color: #ffd700; font: bold 28px sans-serif; text-shadow: 0 0 8px #000; z-index: 5; opacity: 0; pointer-events: none; }
      #score-popup.visible { animation: scorePop 0.6s ease-out forwards; }
      @keyframes scorePop { 0% { opacity: 0; transform: translate(-50%,0) scale(0.5); } 30% { opacity: 1; transform: translate(-50%,-10px) scale(1.2); } 100% { opacity: 0; transform: translate(-50%,-50px) scale(1); } }
      #level-intro { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.4); z-index: 8; opacity: 0; pointer-events: none; }
      #level-intro.visible { animation: fadeInOut 2s ease-in-out forwards; }
      #level-intro .card { background: rgba(0,0,0,0.7); color: #fff; padding: 24px 48px; border-radius: 12px; font: 24px sans-serif; }
      @keyframes fadeInOut { 0% { opacity: 0; } 15% { opacity: 1; } 85% { opacity: 1; } 100% { opacity: 0; } }
      #level-complete-overlay { display: none; position: absolute; inset: 0; background: rgba(0,0,0,0.8); z-index: 12; align-items: center; justify-content: center; flex-direction: column; }
      #level-complete-overlay.visible { display: flex; }
      #level-complete-overlay h2 { color: #ffd700; font: 36px sans-serif; margin-bottom: 16px; }
      #level-complete-overlay p { color: #ccc; margin-bottom: 24px; }
      .level-complete-stars { font-size: 36px; letter-spacing: 8px; color: #ffd700; margin-bottom: 8px; }
      #win-overlay { display: none; position: absolute; inset: 0; background: rgba(0,0,0,0.9); z-index: 12; align-items: center; justify-content: center; flex-direction: column; }
      #win-overlay.visible { display: flex; }
      #win-overlay h2 { color: #ffd700; font: 42px sans-serif; margin-bottom: 16px; }
      #win-overlay p { color: #fff; font: 20px sans-serif; margin-bottom: 24px; }
      #damage-flash { position: absolute; inset: 0; background: rgba(255,0,0,0.25); z-index: 6; pointer-events: none; opacity: 0; }
      #damage-flash.visible { animation: damageFlash 0.25s ease-out forwards; }
      @keyframes damageFlash { 0% { opacity: 0.6; } 100% { opacity: 0; } }
      #stomp-flash { position: absolute; inset: 0; background: rgba(255,200,0,0.2); z-index: 5; pointer-events: none; opacity: 0; }
      #stomp-flash.visible { animation: stompFlash 0.12s ease-out forwards; }
      @keyframes stompFlash { 0% { opacity: 0.7; } 100% { opacity: 0; } }
      #transition-overlay { position: absolute; inset: 0; background: #000; z-index: 11; pointer-events: none; opacity: 0; transition: opacity 0.3s; }
      #transition-overlay.visible { opacity: 1; }
      #pause-overlay { display: none; position: absolute; inset: 0; background: rgba(0,0,0,0.75); z-index: 10; align-items: center; justify-content: center; flex-direction: column; }
      #pause-overlay.visible { display: flex; animation: pauseIn 0.15s ease-out; }
      @keyframes pauseIn { from { transform: scale(0.98); opacity: 0.9; } to { transform: scale(1); opacity: 1; } }
      #pause-overlay h2 { color: #fff; font: 32px sans-serif; margin-bottom: 24px; }
      #pause-overlay button { padding: 12px 24px; font-size: 18px; cursor: pointer; margin: 8px; background: #3498db; color: #fff; border: none; border-radius: 8px; transition: transform 0.08s; }
      #pause-overlay button:hover { background: #2980b9; }
      #pause-overlay button:active { transform: scale(0.95); }
      .overlay-btn { padding: 12px 32px; font-size: 18px; cursor: pointer; background: #3498db; color: #fff; border: none; border-radius: 8px; transition: transform 0.08s; }
      .overlay-btn:hover { background: #2980b9; }
      .overlay-btn:active { transform: scale(0.95); }
    </style>
  </head>
  <body>
    <div id="app">
      <div id="hud">
        <span id="hud-level">Level 1</span>
        <span id="hud-score">Score: 0</span>
        <span id="hud-coins" style="display: none;"></span>
        <div id="hud-hearts" title="Lives"></div>
      </div>
      <div id="score-popup"></div>
      <div id="level-intro"><div class="card" id="level-intro-text">Level 1</div></div>
      <div id="level-complete-overlay">
        <h2>Level Complete!</h2>
        <p id="level-complete-stars" class="level-complete-stars" title="Stars"></p>
        <p id="level-complete-score"></p>
        <button class="overlay-btn" id="level-complete-next">Next</button>
      </div>
      <div id="win-overlay">
        <h2>You Win!</h2>
        <p id="win-score">Final score: 0</p>
        <button class="overlay-btn" id="win-play-again">Play Again</button>
      </div>
      <div id="damage-flash"></div>
      <div id="stomp-flash"></div>
      <div id="transition-overlay"></div>
      <div id="pause-overlay">
        <h2>Paused</h2>
        <button id="resume-btn">Resume</button>
        <button id="restart-btn">Restart Level</button>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
